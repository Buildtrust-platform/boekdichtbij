"use strict";var Zl=Object.create;var xt=Object.defineProperty;var eu=Object.getOwnPropertyDescriptor;var tu=Object.getOwnPropertyNames;var ru=Object.getPrototypeOf,ou=Object.prototype.hasOwnProperty;var P=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),br=(t,e)=>{for(var r in e)xt(t,r,{get:e[r],enumerable:!0})},Io=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of tu(e))!ou.call(t,i)&&i!==r&&xt(t,i,{get:()=>e[i],enumerable:!(o=eu(e,i))||o.enumerable});return t};var Le=(t,e,r)=>(r=t!=null?Zl(ru(t)):{},Io(e||!t||!t.__esModule?xt(r,"default",{value:t,enumerable:!0}):r,t)),nu=t=>Io(xt({},"__esModule",{value:!0}),t);var ae=P((Qp,ko)=>{"use strict";ko.exports=TypeError});var qo=P((Jp,Fo)=>{Fo.exports=require("util").inspect});var je=P((Yp,nn)=>{var Lr=typeof Map=="function"&&Map.prototype,Ir=Object.getOwnPropertyDescriptor&&Lr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,kt=Lr&&Ir&&typeof Ir.get=="function"?Ir.get:null,Uo=Lr&&Map.prototype.forEach,$r=typeof Set=="function"&&Set.prototype,Dr=Object.getOwnPropertyDescriptor&&$r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ft=$r&&Dr&&typeof Dr.get=="function"?Dr.get:null,Lo=$r&&Set.prototype.forEach,au=typeof WeakMap=="function"&&WeakMap.prototype,ze=au?WeakMap.prototype.has:null,lu=typeof WeakSet=="function"&&WeakSet.prototype,We=lu?WeakSet.prototype.has:null,uu=typeof WeakRef=="function"&&WeakRef.prototype,$o=uu?WeakRef.prototype.deref:null,cu=Boolean.prototype.valueOf,du=Object.prototype.toString,pu=Function.prototype.toString,fu=String.prototype.match,Br=String.prototype.slice,ee=String.prototype.replace,hu=String.prototype.toUpperCase,Bo=String.prototype.toLowerCase,Yo=RegExp.prototype.test,Ho=Array.prototype.concat,$=Array.prototype.join,mu=Array.prototype.slice,Ko=Math.floor,Nr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Mr=Object.getOwnPropertySymbols,kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,_e=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ve=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===_e||!0)?Symbol.toStringTag:null,Xo=Object.prototype.propertyIsEnumerable,zo=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Wo(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Yo.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var o=t<0?-Ko(-t):Ko(t);if(o!==t){var i=String(o),s=Br.call(e,i.length+1);return ee.call(i,r,"$&_")+"."+ee.call(ee.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ee.call(e,r,"$&_")}var Fr=qo(),Vo=Fr.custom,jo=tn(Vo)?Vo:null,Zo={__proto__:null,double:'"',single:"'"},yu={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};nn.exports=function t(e,r,o,i){var s=r||{};if(Q(s,"quoteStyle")&&!Q(Zo,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Q(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Q(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Q(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Q(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return on(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return c?Wo(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return c?Wo(e,l):l}var d=typeof s.depth>"u"?5:s.depth;if(typeof o>"u"&&(o=0),o>=d&&d>0&&typeof e=="object")return qr(e)?"[Array]":"[Object]";var f=Gu(s,o);if(typeof i>"u")i=[];else if(rn(i,e)>=0)return"[Circular]";function p(F,Y,j){if(Y&&(i=mu.call(i),i.push(Y)),j){var Ue={depth:s.depth};return Q(s,"quoteStyle")&&(Ue.quoteStyle=s.quoteStyle),t(F,Ue,o+1,i)}return t(F,s,o+1,i)}if(typeof e=="function"&&!Qo(e)){var h=bu(e),m=Nt(e,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(m.length>0?" { "+$.call(m,", ")+" }":"")}if(tn(e)){var y=_e?ee.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):kr.call(e);return typeof e=="object"&&!_e?Ke(y):y}if(Iu(e)){for(var g="<"+Bo.call(String(e.nodeName)),S=e.attributes||[],_=0;_<S.length;_++)g+=" "+S[_].name+"="+en(vu(S[_].value),"double",s);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+Bo.call(String(e.nodeName))+">",g}if(qr(e)){if(e.length===0)return"[]";var v=Nt(e,p);return f&&!Mu(v)?"["+Ur(v,f)+"]":"[ "+$.call(v,", ")+" ]"}if(gu(e)){var O=Nt(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!Xo.call(e,"cause")?"{ ["+String(e)+"] "+$.call(Ho.call("[cause]: "+p(e.cause),O),", ")+" }":O.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$.call(O,", ")+" }"}if(typeof e=="object"&&a){if(jo&&typeof e[jo]=="function"&&Fr)return Fr(e,{depth:d-o});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Ou(e)){var N=[];return Uo&&Uo.call(e,function(F,Y){N.push(p(Y,e,!0)+" => "+p(F,e))}),Jo("Map",kt.call(e),N,f)}if(Au(e)){var M=[];return Lo&&Lo.call(e,function(F){M.push(p(F,e))}),Jo("Set",Ft.call(e),M,f)}if(wu(e))return Gr("WeakMap");if(Cu(e))return Gr("WeakSet");if(Ru(e))return Gr("WeakRef");if(Su(e))return Ke(p(Number(e)));if(_u(e))return Ke(p(Nr.call(e)));if(Eu(e))return Ke(cu.call(e));if(Tu(e))return Ke(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!Pu(e)&&!Qo(e)){var A=Nt(e,p),L=zo?zo(e)===Object.prototype:e instanceof Object||e.constructor===Object,se=e instanceof Object?"":"null prototype",J=!L&&Ve&&Object(e)===e&&Ve in e?Br.call(te(e),8,-1):se?"Object":"",_t=L||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Pe=_t+(J||se?"["+$.call(Ho.call([],J||[],se||[]),": ")+"] ":"");return A.length===0?Pe+"{}":f?Pe+"{"+Ur(A,f)+"}":Pe+"{ "+$.call(A,", ")+" }"}return String(e)};function en(t,e,r){var o=r.quoteStyle||e,i=Zo[o];return i+t+i}function vu(t){return ee.call(String(t),/"/g,"&quot;")}function le(t){return!Ve||!(typeof t=="object"&&(Ve in t||typeof t[Ve]<"u"))}function qr(t){return te(t)==="[object Array]"&&le(t)}function Pu(t){return te(t)==="[object Date]"&&le(t)}function Qo(t){return te(t)==="[object RegExp]"&&le(t)}function gu(t){return te(t)==="[object Error]"&&le(t)}function Tu(t){return te(t)==="[object String]"&&le(t)}function Su(t){return te(t)==="[object Number]"&&le(t)}function Eu(t){return te(t)==="[object Boolean]"&&le(t)}function tn(t){if(_e)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!kr)return!1;try{return kr.call(t),!0}catch{}return!1}function _u(t){if(!t||typeof t!="object"||!Nr)return!1;try{return Nr.call(t),!0}catch{}return!1}var xu=Object.prototype.hasOwnProperty||function(t){return t in this};function Q(t,e){return xu.call(t,e)}function te(t){return du.call(t)}function bu(t){if(t.name)return t.name;var e=fu.call(pu.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function rn(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,o=t.length;r<o;r++)if(t[r]===e)return r;return-1}function Ou(t){if(!kt||!t||typeof t!="object")return!1;try{kt.call(t);try{Ft.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function wu(t){if(!ze||!t||typeof t!="object")return!1;try{ze.call(t,ze);try{We.call(t,We)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Ru(t){if(!$o||!t||typeof t!="object")return!1;try{return $o.call(t),!0}catch{}return!1}function Au(t){if(!Ft||!t||typeof t!="object")return!1;try{Ft.call(t);try{kt.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Cu(t){if(!We||!t||typeof t!="object")return!1;try{We.call(t,We);try{ze.call(t,ze)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Iu(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function on(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,o="... "+r+" more character"+(r>1?"s":"");return on(Br.call(t,0,e.maxStringLength),e)+o}var i=yu[e.quoteStyle||"single"];i.lastIndex=0;var s=ee.call(ee.call(t,i,"\\$1"),/[\x00-\x1f]/g,Du);return en(s,"single",e)}function Du(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+hu.call(e.toString(16))}function Ke(t){return"Object("+t+")"}function Gr(t){return t+" { ? }"}function Jo(t,e,r,o){var i=o?Ur(r,o):$.call(r,", ");return t+" ("+e+") {"+i+"}"}function Mu(t){for(var e=0;e<t.length;e++)if(rn(t[e],`
`)>=0)return!1;return!0}function Gu(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=$.call(Array(t.indent+1)," ");else return null;return{base:r,prev:$.call(Array(e+1),r)}}function Ur(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+$.call(t,","+r)+`
`+e.prev}function Nt(t,e){var r=qr(t),o=[];if(r){o.length=t.length;for(var i=0;i<t.length;i++)o[i]=Q(t,i)?e(t[i],t):""}var s=typeof Mr=="function"?Mr(t):[],a;if(_e){a={};for(var c=0;c<s.length;c++)a["$"+s[c]]=s[c]}for(var u in t)Q(t,u)&&(r&&String(Number(u))===u&&u<t.length||_e&&a["$"+u]instanceof Symbol||(Yo.call(/[^\w$]/,u)?o.push(e(u,t)+": "+e(t[u],t)):o.push(u+": "+e(t[u],t))));if(typeof Mr=="function")for(var l=0;l<s.length;l++)Xo.call(t,s[l])&&o.push("["+e(s[l])+"]: "+e(t[s[l]],t));return o}});var an=P((Xp,sn)=>{"use strict";var Nu=je(),ku=ae(),qt=function(t,e,r){for(var o=t,i;(i=o.next)!=null;o=i)if(i.key===e)return o.next=i.next,r||(i.next=t.next,t.next=i),i},Fu=function(t,e){if(t){var r=qt(t,e);return r&&r.value}},qu=function(t,e,r){var o=qt(t,e);o?o.value=r:t.next={key:e,next:t.next,value:r}},Uu=function(t,e){return t?!!qt(t,e):!1},Lu=function(t,e){if(t)return qt(t,e,!0)};sn.exports=function(){var e,r={assert:function(o){if(!r.has(o))throw new ku("Side channel does not contain "+Nu(o))},delete:function(o){var i=e&&e.next,s=Lu(e,o);return s&&i&&i===s&&(e=void 0),!!s},get:function(o){return Fu(e,o)},has:function(o){return Uu(e,o)},set:function(o,i){e||(e={next:void 0}),qu(e,o,i)}};return r}});var Hr=P((Zp,ln)=>{"use strict";ln.exports=Object});var cn=P((ef,un)=>{"use strict";un.exports=Error});var pn=P((tf,dn)=>{"use strict";dn.exports=EvalError});var hn=P((rf,fn)=>{"use strict";fn.exports=RangeError});var yn=P((of,mn)=>{"use strict";mn.exports=ReferenceError});var Pn=P((nf,vn)=>{"use strict";vn.exports=SyntaxError});var Tn=P((sf,gn)=>{"use strict";gn.exports=URIError});var En=P((af,Sn)=>{"use strict";Sn.exports=Math.abs});var xn=P((lf,_n)=>{"use strict";_n.exports=Math.floor});var On=P((uf,bn)=>{"use strict";bn.exports=Math.max});var Rn=P((cf,wn)=>{"use strict";wn.exports=Math.min});var Cn=P((df,An)=>{"use strict";An.exports=Math.pow});var Dn=P((pf,In)=>{"use strict";In.exports=Math.round});var Gn=P((ff,Mn)=>{"use strict";Mn.exports=Number.isNaN||function(e){return e!==e}});var kn=P((hf,Nn)=>{"use strict";var $u=Gn();Nn.exports=function(e){return $u(e)||e===0?e:e<0?-1:1}});var qn=P((mf,Fn)=>{"use strict";Fn.exports=Object.getOwnPropertyDescriptor});var Kr=P((yf,Un)=>{"use strict";var Ut=qn();if(Ut)try{Ut([],"length")}catch{Ut=null}Un.exports=Ut});var $n=P((vf,Ln)=>{"use strict";var Lt=Object.defineProperty||!1;if(Lt)try{Lt({},"a",{value:1})}catch{Lt=!1}Ln.exports=Lt});var Hn=P((Pf,Bn)=>{"use strict";Bn.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),o=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,r);if(c.value!==i||c.enumerable!==!0)return!1}return!0}});var Wn=P((gf,zn)=>{"use strict";var Kn=typeof Symbol<"u"&&Symbol,Bu=Hn();zn.exports=function(){return typeof Kn!="function"||typeof Symbol!="function"||typeof Kn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Bu()}});var zr=P((Tf,Vn)=>{"use strict";Vn.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var Wr=P((Sf,jn)=>{"use strict";var Hu=Hr();jn.exports=Hu.getPrototypeOf||null});var Yn=P((Ef,Jn)=>{"use strict";var Ku="Function.prototype.bind called on incompatible ",zu=Object.prototype.toString,Wu=Math.max,Vu="[object Function]",Qn=function(e,r){for(var o=[],i=0;i<e.length;i+=1)o[i]=e[i];for(var s=0;s<r.length;s+=1)o[s+e.length]=r[s];return o},ju=function(e,r){for(var o=[],i=r||0,s=0;i<e.length;i+=1,s+=1)o[s]=e[i];return o},Qu=function(t,e){for(var r="",o=0;o<t.length;o+=1)r+=t[o],o+1<t.length&&(r+=e);return r};Jn.exports=function(e){var r=this;if(typeof r!="function"||zu.apply(r)!==Vu)throw new TypeError(Ku+r);for(var o=ju(arguments,1),i,s=function(){if(this instanceof i){var d=r.apply(this,Qn(o,arguments));return Object(d)===d?d:this}return r.apply(e,Qn(o,arguments))},a=Wu(0,r.length-o.length),c=[],u=0;u<a;u++)c[u]="$"+u;if(i=Function("binder","return function ("+Qu(c,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}});var Qe=P((_f,Xn)=>{"use strict";var Ju=Yn();Xn.exports=Function.prototype.bind||Ju});var $t=P((xf,Zn)=>{"use strict";Zn.exports=Function.prototype.call});var Vr=P((bf,ei)=>{"use strict";ei.exports=Function.prototype.apply});var ri=P((Of,ti)=>{"use strict";ti.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var ni=P((wf,oi)=>{"use strict";var Yu=Qe(),Xu=Vr(),Zu=$t(),ec=ri();oi.exports=ec||Yu.call(Zu,Xu)});var jr=P((Rf,ii)=>{"use strict";var tc=Qe(),rc=ae(),oc=$t(),nc=ni();ii.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new rc("a function is required");return nc(tc,oc,e)}});var di=P((Af,ci)=>{"use strict";var ic=jr(),si=Kr(),li;try{li=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var Qr=!!li&&si&&si(Object.prototype,"__proto__"),ui=Object,ai=ui.getPrototypeOf;ci.exports=Qr&&typeof Qr.get=="function"?ic([Qr.get]):typeof ai=="function"?function(e){return ai(e==null?e:ui(e))}:!1});var yi=P((Cf,mi)=>{"use strict";var pi=zr(),fi=Wr(),hi=di();mi.exports=pi?function(e){return pi(e)}:fi?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return fi(e)}:hi?function(e){return hi(e)}:null});var Pi=P((If,vi)=>{"use strict";var sc=Function.prototype.call,ac=Object.prototype.hasOwnProperty,lc=Qe();vi.exports=lc.call(sc,ac)});var Kt=P((Df,xi)=>{"use strict";var T,uc=Hr(),cc=cn(),dc=pn(),pc=hn(),fc=yn(),we=Pn(),Oe=ae(),hc=Tn(),mc=En(),yc=xn(),vc=On(),Pc=Rn(),gc=Cn(),Tc=Dn(),Sc=kn(),Ei=Function,Jr=function(t){try{return Ei('"use strict"; return ('+t+").constructor;")()}catch{}},Je=Kr(),Ec=$n(),Yr=function(){throw new Oe},_c=Je?function(){try{return arguments.callee,Yr}catch{try{return Je(arguments,"callee").get}catch{return Yr}}}():Yr,xe=Wn()(),I=yi(),xc=Wr(),bc=zr(),_i=Vr(),Ye=$t(),be={},Oc=typeof Uint8Array>"u"||!I?T:I(Uint8Array),ue={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":xe&&I?I([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":be,"%AsyncGenerator%":be,"%AsyncGeneratorFunction%":be,"%AsyncIteratorPrototype%":be,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":cc,"%eval%":eval,"%EvalError%":dc,"%Float16Array%":typeof Float16Array>"u"?T:Float16Array,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":Ei,"%GeneratorFunction%":be,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xe&&I?I(I([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xe||!I?T:I(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":uc,"%Object.getOwnPropertyDescriptor%":Je,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":pc,"%ReferenceError%":fc,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xe||!I?T:I(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xe&&I?I(""[Symbol.iterator]()):T,"%Symbol%":xe?Symbol:T,"%SyntaxError%":we,"%ThrowTypeError%":_c,"%TypedArray%":Oc,"%TypeError%":Oe,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":hc,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet,"%Function.prototype.call%":Ye,"%Function.prototype.apply%":_i,"%Object.defineProperty%":Ec,"%Object.getPrototypeOf%":xc,"%Math.abs%":mc,"%Math.floor%":yc,"%Math.max%":vc,"%Math.min%":Pc,"%Math.pow%":gc,"%Math.round%":Tc,"%Math.sign%":Sc,"%Reflect.getPrototypeOf%":bc};if(I)try{null.error}catch(t){gi=I(I(t)),ue["%Error.prototype%"]=gi}var gi,wc=function t(e){var r;if(e==="%AsyncFunction%")r=Jr("async function () {}");else if(e==="%GeneratorFunction%")r=Jr("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Jr("async function* () {}");else if(e==="%AsyncGenerator%"){var o=t("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&I&&(r=I(i.prototype))}return ue[e]=r,r},Ti={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Xe=Qe(),Bt=Pi(),Rc=Xe.call(Ye,Array.prototype.concat),Ac=Xe.call(_i,Array.prototype.splice),Si=Xe.call(Ye,String.prototype.replace),Ht=Xe.call(Ye,String.prototype.slice),Cc=Xe.call(Ye,RegExp.prototype.exec),Ic=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Dc=/\\(\\)?/g,Mc=function(e){var r=Ht(e,0,1),o=Ht(e,-1);if(r==="%"&&o!=="%")throw new we("invalid intrinsic syntax, expected closing `%`");if(o==="%"&&r!=="%")throw new we("invalid intrinsic syntax, expected opening `%`");var i=[];return Si(e,Ic,function(s,a,c,u){i[i.length]=c?Si(u,Dc,"$1"):a||s}),i},Gc=function(e,r){var o=e,i;if(Bt(Ti,o)&&(i=Ti[o],o="%"+i[0]+"%"),Bt(ue,o)){var s=ue[o];if(s===be&&(s=wc(o)),typeof s>"u"&&!r)throw new Oe("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:o,value:s}}throw new we("intrinsic "+e+" does not exist!")};xi.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Oe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Oe('"allowMissing" argument must be a boolean');if(Cc(/^%?[^%]*%?$/,e)===null)throw new we("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var o=Mc(e),i=o.length>0?o[0]:"",s=Gc("%"+i+"%",r),a=s.name,c=s.value,u=!1,l=s.alias;l&&(i=l[0],Ac(o,Rc([0,1],l)));for(var d=1,f=!0;d<o.length;d+=1){var p=o[d],h=Ht(p,0,1),m=Ht(p,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new we("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(u=!0),i+="."+p,a="%"+i+"%",Bt(ue,a))c=ue[a];else if(c!=null){if(!(p in c)){if(!r)throw new Oe("base intrinsic for "+e+" exists, but the property is not available.");return}if(Je&&d+1>=o.length){var y=Je(c,p);f=!!y,f&&"get"in y&&!("originalValue"in y.get)?c=y.get:c=c[p]}else f=Bt(c,p),c=c[p];f&&!u&&(ue[a]=c)}}return c}});var Xr=P((Mf,wi)=>{"use strict";var bi=Kt(),Oi=jr(),Nc=Oi([bi("%String.prototype.indexOf%")]);wi.exports=function(e,r){var o=bi(e,!!r);return typeof o=="function"&&Nc(e,".prototype.")>-1?Oi([o]):o}});var Zr=P((Gf,Ai)=>{"use strict";var kc=Kt(),Ze=Xr(),Fc=je(),qc=ae(),Ri=kc("%Map%",!0),Uc=Ze("Map.prototype.get",!0),Lc=Ze("Map.prototype.set",!0),$c=Ze("Map.prototype.has",!0),Bc=Ze("Map.prototype.delete",!0),Hc=Ze("Map.prototype.size",!0);Ai.exports=!!Ri&&function(){var e,r={assert:function(o){if(!r.has(o))throw new qc("Side channel does not contain "+Fc(o))},delete:function(o){if(e){var i=Bc(e,o);return Hc(e)===0&&(e=void 0),i}return!1},get:function(o){if(e)return Uc(e,o)},has:function(o){return e?$c(e,o):!1},set:function(o,i){e||(e=new Ri),Lc(e,o,i)}};return r}});var Ii=P((Nf,Ci)=>{"use strict";var Kc=Kt(),Wt=Xr(),zc=je(),zt=Zr(),Wc=ae(),Re=Kc("%WeakMap%",!0),Vc=Wt("WeakMap.prototype.get",!0),jc=Wt("WeakMap.prototype.set",!0),Qc=Wt("WeakMap.prototype.has",!0),Jc=Wt("WeakMap.prototype.delete",!0);Ci.exports=Re?function(){var e,r,o={assert:function(i){if(!o.has(i))throw new Wc("Side channel does not contain "+zc(i))},delete:function(i){if(Re&&i&&(typeof i=="object"||typeof i=="function")){if(e)return Jc(e,i)}else if(zt&&r)return r.delete(i);return!1},get:function(i){return Re&&i&&(typeof i=="object"||typeof i=="function")&&e?Vc(e,i):r&&r.get(i)},has:function(i){return Re&&i&&(typeof i=="object"||typeof i=="function")&&e?Qc(e,i):!!r&&r.has(i)},set:function(i,s){Re&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Re),jc(e,i,s)):zt&&(r||(r=zt()),r.set(i,s))}};return o}:zt});var Mi=P((kf,Di)=>{"use strict";var Yc=ae(),Xc=je(),Zc=an(),ed=Zr(),td=Ii(),rd=td||ed||Zc;Di.exports=function(){var e,r={assert:function(o){if(!r.has(o))throw new Yc("Side channel does not contain "+Xc(o))},delete:function(o){return!!e&&e.delete(o)},get:function(o){return e&&e.get(o)},has:function(o){return!!e&&e.has(o)},set:function(o,i){e||(e=rd()),e.set(o,i)}};return r}});var Vt=P((Ff,Gi)=>{"use strict";var od=String.prototype.replace,nd=/%20/g,eo={RFC1738:"RFC1738",RFC3986:"RFC3986"};Gi.exports={default:eo.RFC3986,formatters:{RFC1738:function(t){return od.call(t,nd,"+")},RFC3986:function(t){return String(t)}},RFC1738:eo.RFC1738,RFC3986:eo.RFC3986}});var oo=P((qf,ki)=>{"use strict";var id=Vt(),to=Object.prototype.hasOwnProperty,ce=Array.isArray,B=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),sd=function(e){for(;e.length>1;){var r=e.pop(),o=r.obj[r.prop];if(ce(o)){for(var i=[],s=0;s<o.length;++s)typeof o[s]<"u"&&i.push(o[s]);r.obj[r.prop]=i}}},Ni=function(e,r){for(var o=r&&r.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]<"u"&&(o[i]=e[i]);return o},ad=function t(e,r,o){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(ce(e))e.push(r);else if(e&&typeof e=="object")(o&&(o.plainObjects||o.allowPrototypes)||!to.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return ce(e)&&!ce(r)&&(i=Ni(e,o)),ce(e)&&ce(r)?(r.forEach(function(s,a){if(to.call(e,a)){var c=e[a];c&&typeof c=="object"&&s&&typeof s=="object"?e[a]=t(c,s,o):e.push(s)}else e[a]=s}),e):Object.keys(r).reduce(function(s,a){var c=r[a];return to.call(s,a)?s[a]=t(s[a],c,o):s[a]=c,s},i)},ld=function(e,r){return Object.keys(r).reduce(function(o,i){return o[i]=r[i],o},e)},ud=function(t,e,r){var o=t.replace(/\+/g," ");if(r==="iso-8859-1")return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch{return o}},ro=1024,cd=function(e,r,o,i,s){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),o==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var c="",u=0;u<a.length;u+=ro){for(var l=a.length>=ro?a.slice(u,u+ro):a,d=[],f=0;f<l.length;++f){var p=l.charCodeAt(f);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===id.RFC1738&&(p===40||p===41)){d[d.length]=l.charAt(f);continue}if(p<128){d[d.length]=B[p];continue}if(p<2048){d[d.length]=B[192|p>>6]+B[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=B[224|p>>12]+B[128|p>>6&63]+B[128|p&63];continue}f+=1,p=65536+((p&1023)<<10|l.charCodeAt(f)&1023),d[d.length]=B[240|p>>18]+B[128|p>>12&63]+B[128|p>>6&63]+B[128|p&63]}c+=d.join("")}return c},dd=function(e){for(var r=[{obj:{o:e},prop:"o"}],o=[],i=0;i<r.length;++i)for(var s=r[i],a=s.obj[s.prop],c=Object.keys(a),u=0;u<c.length;++u){var l=c[u],d=a[l];typeof d=="object"&&d!==null&&o.indexOf(d)===-1&&(r.push({obj:a,prop:l}),o.push(d))}return sd(r),e},pd=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},fd=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},hd=function(e,r){return[].concat(e,r)},md=function(e,r){if(ce(e)){for(var o=[],i=0;i<e.length;i+=1)o.push(r(e[i]));return o}return r(e)};ki.exports={arrayToObject:Ni,assign:ld,combine:hd,compact:dd,decode:ud,encode:cd,isBuffer:fd,isRegExp:pd,maybeMap:md,merge:ad}});var Bi=P((Uf,$i)=>{"use strict";var qi=Mi(),jt=oo(),et=Vt(),yd=Object.prototype.hasOwnProperty,Ui={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},H=Array.isArray,vd=Array.prototype.push,Li=function(t,e){vd.apply(t,H(e)?e:[e])},Pd=Date.prototype.toISOString,Fi=et.default,C={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:jt.encode,encodeValuesOnly:!1,filter:void 0,format:Fi,formatter:et.formatters[Fi],indices:!1,serializeDate:function(e){return Pd.call(e)},skipNulls:!1,strictNullHandling:!1},gd=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},no={},Td=function t(e,r,o,i,s,a,c,u,l,d,f,p,h,m,y,g,S,_){for(var v=e,O=_,N=0,M=!1;(O=O.get(no))!==void 0&&!M;){var A=O.get(e);if(N+=1,typeof A<"u"){if(A===N)throw new RangeError("Cyclic object value");M=!0}typeof O.get(no)>"u"&&(N=0)}if(typeof d=="function"?v=d(r,v):v instanceof Date?v=h(v):o==="comma"&&H(v)&&(v=jt.maybeMap(v,function(xr){return xr instanceof Date?h(xr):xr})),v===null){if(a)return l&&!g?l(r,C.encoder,S,"key",m):r;v=""}if(gd(v)||jt.isBuffer(v)){if(l){var L=g?r:l(r,C.encoder,S,"key",m);return[y(L)+"="+y(l(v,C.encoder,S,"value",m))]}return[y(r)+"="+y(String(v))]}var se=[];if(typeof v>"u")return se;var J;if(o==="comma"&&H(v))g&&l&&(v=jt.maybeMap(v,l)),J=[{value:v.length>0?v.join(",")||null:void 0}];else if(H(d))J=d;else{var _t=Object.keys(v);J=f?_t.sort(f):_t}var Pe=u?String(r).replace(/\./g,"%2E"):String(r),F=i&&H(v)&&v.length===1?Pe+"[]":Pe;if(s&&H(v)&&v.length===0)return F+"[]";for(var Y=0;Y<J.length;++Y){var j=J[Y],Ue=typeof j=="object"&&j&&typeof j.value<"u"?j.value:v[j];if(!(c&&Ue===null)){var _r=p&&u?String(j).replace(/\./g,"%2E"):String(j),Xl=H(v)?typeof o=="function"?o(F,_r):F:F+(p?"."+_r:"["+_r+"]");_.set(e,N);var Co=qi();Co.set(no,_),Li(se,t(Ue,Xl,o,i,s,a,c,u,o==="comma"&&g&&H(v)?null:l,d,f,p,h,m,y,g,S,Co))}}return se},Sd=function(e){if(!e)return C;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||C.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var o=et.default;if(typeof e.format<"u"){if(!yd.call(et.formatters,e.format))throw new TypeError("Unknown format option provided.");o=e.format}var i=et.formatters[o],s=C.filter;(typeof e.filter=="function"||H(e.filter))&&(s=e.filter);var a;if(e.arrayFormat in Ui?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=C.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:C.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:C.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:C.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:C.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?C.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:C.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:C.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:C.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:C.encodeValuesOnly,filter:s,format:o,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:C.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:C.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:C.strictNullHandling}};$i.exports=function(t,e){var r=t,o=Sd(e),i,s;typeof o.filter=="function"?(s=o.filter,r=s("",r)):H(o.filter)&&(s=o.filter,i=s);var a=[];if(typeof r!="object"||r===null)return"";var c=Ui[o.arrayFormat],u=c==="comma"&&o.commaRoundTrip;i||(i=Object.keys(r)),o.sort&&i.sort(o.sort);for(var l=qi(),d=0;d<i.length;++d){var f=i[d],p=r[f];o.skipNulls&&p===null||Li(a,Td(p,f,c,u,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,l))}var h=a.join(o.delimiter),m=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),h.length>0?m+h:""}});var Wi=P((Lf,zi)=>{"use strict";var de=oo(),io=Object.prototype.hasOwnProperty,Hi=Array.isArray,x={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:de.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},Ed=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Ki=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},_d="utf8=%26%2310003%3B",xd="utf8=%E2%9C%93",bd=function(e,r){var o={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,r.throwOnLimitExceeded?s+1:s);if(r.throwOnLimitExceeded&&a.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var c=-1,u,l=r.charset;if(r.charsetSentinel)for(u=0;u<a.length;++u)a[u].indexOf("utf8=")===0&&(a[u]===xd?l="utf-8":a[u]===_d&&(l="iso-8859-1"),c=u,u=a.length);for(u=0;u<a.length;++u)if(u!==c){var d=a[u],f=d.indexOf("]="),p=f===-1?d.indexOf("="):f+1,h,m;p===-1?(h=r.decoder(d,x.decoder,l,"key"),m=r.strictNullHandling?null:""):(h=r.decoder(d.slice(0,p),x.decoder,l,"key"),m=de.maybeMap(Ki(d.slice(p+1),r,Hi(o[h])?o[h].length:0),function(g){return r.decoder(g,x.decoder,l,"value")})),m&&r.interpretNumericEntities&&l==="iso-8859-1"&&(m=Ed(String(m))),d.indexOf("[]=")>-1&&(m=Hi(m)?[m]:m);var y=io.call(o,h);y&&r.duplicates==="combine"?o[h]=de.combine(o[h],m):(!y||r.duplicates==="last")&&(o[h]=m)}return o},Od=function(t,e,r,o){var i=0;if(t.length>0&&t[t.length-1]==="[]"){var s=t.slice(0,-1).join("");i=Array.isArray(e)&&e[s]?e[s].length:0}for(var a=o?e:Ki(e,r,i),c=t.length-1;c>=0;--c){var u,l=t[c];if(l==="[]"&&r.parseArrays)u=r.allowEmptyArrays&&(a===""||r.strictNullHandling&&a===null)?[]:de.combine([],a);else{u=r.plainObjects?{__proto__:null}:{};var d=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,f=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,p=parseInt(f,10);!r.parseArrays&&f===""?u={0:a}:!isNaN(p)&&l!==f&&String(p)===f&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(u=[],u[p]=a):f!=="__proto__"&&(u[f]=a)}a=u}return a},wd=function(e,r,o,i){if(e){var s=o.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,u=o.depth>0&&a.exec(s),l=u?s.slice(0,u.index):s,d=[];if(l){if(!o.plainObjects&&io.call(Object.prototype,l)&&!o.allowPrototypes)return;d.push(l)}for(var f=0;o.depth>0&&(u=c.exec(s))!==null&&f<o.depth;){if(f+=1,!o.plainObjects&&io.call(Object.prototype,u[1].slice(1,-1))&&!o.allowPrototypes)return;d.push(u[1])}if(u){if(o.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+o.depth+" and strictDepth is true");d.push("["+s.slice(u.index)+"]")}return Od(d,r,o,i)}},Rd=function(e){if(!e)return x;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?x.charset:e.charset,o=typeof e.duplicates>"u"?x.duplicates:e.duplicates;if(o!=="combine"&&o!=="first"&&o!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:x.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:x.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:x.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:x.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:x.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:x.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:x.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:x.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:x.decoder,delimiter:typeof e.delimiter=="string"||de.isRegExp(e.delimiter)?e.delimiter:x.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:x.depth,duplicates:o,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:x.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:x.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:x.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:x.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:x.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}};zi.exports=function(t,e){var r=Rd(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var o=typeof t=="string"?bd(t,r):t,i=r.plainObjects?{__proto__:null}:{},s=Object.keys(o),a=0;a<s.length;++a){var c=s[a],u=wd(c,o[c],r,typeof t=="string");i=de.merge(i,u,r)}return r.allowSparse===!0?i:de.compact(i)}});var ji=P(($f,Vi)=>{"use strict";var Ad=Bi(),Cd=Wi(),Id=Vt();Vi.exports={formats:Id,parse:Cd,stringify:Ad}});var Gp={};br(Gp,{handler:()=>Mp});module.exports=nu(Gp);var Fe=require("@aws-sdk/client-dynamodb"),k=require("@aws-sdk/lib-dynamodb"),qe=require("@aws-sdk/client-scheduler");var Ae=Le(require("crypto"),1),ao=require("events");var Do=Le(require("crypto"),1);var X=class{computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}},ge=class extends Error{};var bt=class extends X{computeHMACSignature(e,r){return Do.createHmac("sha256",r).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,r){return await this.computeHMACSignature(e,r)}};var wr=Le(require("http"),1),Rr=Le(require("https"),1);var D=class t{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,o,i,s,a,c,u){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let e=new TypeError(t.TIMEOUT_ERROR_CODE);return e.code=t.TIMEOUT_ERROR_CODE,e}};D.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];D.TIMEOUT_ERROR_CODE="ETIMEDOUT";var Z=class{constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}};var Mo=wr.default||wr,Go=Rr.default||Rr,iu=new Mo.Agent({keepAlive:!0}),su=new Go.Agent({keepAlive:!0}),$e=class extends D{constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,r,o,i,s,a,c,u){let l=c==="http",d=this._agent;return d||(d=l?iu:su),new Promise((p,h)=>{let m=(l?Mo:Go).request({host:e,port:r,path:o,method:i,agent:d,headers:s,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});m.setTimeout(u,()=>{m.destroy(D.makeTimeoutError())}),m.on("response",y=>{p(new Or(y))}),m.on("error",y=>{h(y)}),m.once("socket",y=>{y.connecting?y.once(l?"connect":"secureConnect",()=>{m.write(a),m.end()}):(m.write(a),m.end())})})}},Or=class extends Z{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,r)=>{let o="";this._res.setEncoding("utf8"),this._res.on("data",i=>{o+=i}),this._res.once("end",()=>{try{e(JSON.parse(o))}catch(i){r(i)}})})}};var Ot=class t extends D{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=t.makeFetchWithAbortTimeout(e):this._fetchFn=t.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,o,i)=>{let s,a=new Promise((u,l)=>{s=setTimeout(()=>{s=null,l(D.makeTimeoutError())},i)}),c=e(r,o);return Promise.race([c,a]).finally(()=>{s&&clearTimeout(s)})}}static makeFetchWithAbortTimeout(e){return async(r,o,i)=>{let s=new AbortController,a=setTimeout(()=>{a=null,s.abort(D.makeTimeoutError())},i);try{return await e(r,Object.assign(Object.assign({},o),{signal:s.signal}))}catch(c){throw c.name==="AbortError"?D.makeTimeoutError():c}finally{a&&clearTimeout(a)}}}getClientName(){return"fetch"}async makeRequest(e,r,o,i,s,a,c,u){let l=c==="http",d=new URL(o,`${l?"http":"https"}://${e}`);d.port=r;let f=i=="POST"||i=="PUT"||i=="PATCH",p=a||(f?"":void 0),h=await this._fetchFn(d.toString(),{method:i,headers:s,body:p},u);return new Ar(h)}},Ar=class t extends Z{constructor(e){super(e.status,t._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let r={};for(let o of e){if(!Array.isArray(o)||o.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[o[0]]=o[1]}return r}};var wt=class extends X{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new ge("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){let o=new TextEncoder,i=await this.subtleCrypto.importKey("raw",o.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=await this.subtleCrypto.sign("hmac",i,o.encode(e)),a=new Uint8Array(s),c=new Array(a.length);for(let u=0;u<a.length;u++)c[u]=Cr[a[u]];return c.join("")}},Cr=new Array(256);for(let t=0;t<Cr.length;t++)Cr[t]=t.toString(16).padStart(2,"0");var Rt=class{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;let o=e.length,i=0;for(let s=0;s<o;++s)i|=e.charCodeAt(s)^r.charCodeAt(s);return i===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Ot(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new wt(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}};var Gt={};br(Gt,{StripeAPIError:()=>Te,StripeAuthenticationError:()=>Se,StripeCardError:()=>At,StripeConnectionError:()=>He,StripeError:()=>w,StripeIdempotencyError:()=>It,StripeInvalidGrantError:()=>Dt,StripeInvalidRequestError:()=>Ct,StripePermissionError:()=>Be,StripeRateLimitError:()=>Ee,StripeSignatureVerificationError:()=>q,StripeUnknownError:()=>Mt,generate:()=>No});var No=t=>{switch(t.type){case"card_error":return new At(t);case"invalid_request_error":return new Ct(t);case"api_error":return new Te(t);case"authentication_error":return new Se(t);case"rate_limit_error":return new Ee(t);case"idempotency_error":return new It(t);case"invalid_grant":return new Dt(t);default:return new Mt(t)}},w=class extends Error{constructor(e={},r=null){super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}};w.generate=No;var At=class extends w{constructor(e={}){super(e,"StripeCardError")}},Ct=class extends w{constructor(e={}){super(e,"StripeInvalidRequestError")}},Te=class extends w{constructor(e={}){super(e,"StripeAPIError")}},Se=class extends w{constructor(e={}){super(e,"StripeAuthenticationError")}},Be=class extends w{constructor(e={}){super(e,"StripePermissionError")}},Ee=class extends w{constructor(e={}){super(e,"StripeRateLimitError")}},He=class extends w{constructor(e={}){super(e,"StripeConnectionError")}},q=class extends w{constructor(e,r,o={}){super(o,"StripeSignatureVerificationError"),this.header=e,this.payload=r}},It=class extends w{constructor(e={}){super(e,"StripeIdempotencyError")}},Dt=class extends w{constructor(e={}){super(e,"StripeInvalidGrantError")}},Mt=class extends w{constructor(e={}){super(e,"StripeUnknownError")}};var Qi=Le(ji(),1),so=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host"];function Ji(t){return t&&typeof t=="object"&&so.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function re(t){return Qi.stringify(t,{serializeDate:e=>Math.floor(e.getTime()/1e3).toString()}).replace(/%5B/g,"[").replace(/%5D/g,"]")}var Qt=(()=>{let t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{let r=e.replace(/["\n\r\u2028\u2029]/g,o=>t[o]);return o=>r.replace(/\{([\s\S]+?)\}/g,(i,s)=>encodeURIComponent(o[s]||""))}})();function Yi(t){let e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}function Jt(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!Ji(t[0]))return t.shift();let e=Object.keys(t[0]),r=e.filter(o=>so.includes(o));return r.length>0&&r.length!==e.length&&rt(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function Xi(t){let e={auth:null,host:null,headers:{},settings:{}};if(t.length>0){let r=t[t.length-1];if(typeof r=="string")e.auth=t.pop();else if(Ji(r)){let o=Object.assign({},t.pop()),i=Object.keys(o).filter(s=>!so.includes(s));i.length&&rt(`Invalid options found (${i.join(", ")}); ignoring.`),o.apiKey&&(e.auth=o.apiKey),o.idempotencyKey&&(e.headers["Idempotency-Key"]=o.idempotencyKey),o.stripeAccount&&(e.headers["Stripe-Account"]=o.stripeAccount),o.apiVersion&&(e.headers["Stripe-Version"]=o.apiVersion),Number.isInteger(o.maxNetworkRetries)&&(e.settings.maxNetworkRetries=o.maxNetworkRetries),Number.isInteger(o.timeout)&&(e.settings.timeout=o.timeout),o.host&&(e.host=o.host)}}return e}function Zi(t){let e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...o){e.apply(this,o)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}function Yt(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}function es(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[Dd(r)]=t[r],e),{}):t}function Dd(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function tt(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}function ts(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function rt(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function Md(t){let e=typeof t;return(e==="function"||e==="object")&&!!t}function rs(t){let e={},r=(o,i)=>{Object.keys(o).forEach(s=>{let a=o[s],c=i?`${i}[${s}]`:s;if(Md(a)){if(!(a instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(a,"data"))return r(a,c);e[c]=a}else e[c]=String(a)})};return r(t,null),e}function Xt(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}function os(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function ns(t){let e=t.reduce((i,s)=>i+s.length,0),r=new Uint8Array(e),o=0;return t.forEach(i=>{r.set(i,o),o+=i.length}),r}var is=require("child_process"),lo=class extends w{},Zt=class extends Rt{constructor(){super(),this._exec=is.exec,this._UNAME_CACHE=null}uuid4(){return Ae.randomUUID?Ae.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,r)=>{try{this._exec("uname -a",(o,i)=>{if(o)return e(null);e(i)})}catch{e(null)}})),this._UNAME_CACHE}secureCompare(e,r){if(!e||!r)throw new Error("secureCompare must receive two arguments");if(e.length!==r.length)return!1;if(Ae.timingSafeEqual){let o=new TextEncoder,i=o.encode(e),s=o.encode(r);return Ae.timingSafeEqual(i,s)}return super.secureCompare(e,r)}createEmitter(){return new ao.EventEmitter}tryBufferData(e){if(!(e.file.data instanceof ao.EventEmitter))return Promise.resolve(e);let r=[];return new Promise((o,i)=>{e.file.data.on("data",s=>{r.push(s)}).once("end",()=>{let s=Object.assign({},e);s.file.data=ns(r),o(s)}).on("error",s=>{i(new lo({message:"An error occurred while attempting to process the file for upload.",detail:s}))})})}createNodeHttpClient(e){return new $e(e)}createDefaultHttpClient(){return new $e}createNodeCryptoProvider(){return new bt}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}};var ss="2023-10-16";var Et={};br(Et,{Account:()=>_o,AccountLinks:()=>Fa,AccountSessions:()=>qa,Accounts:()=>_o,ApplePayDomains:()=>Ua,ApplicationFees:()=>La,Apps:()=>ap,Balance:()=>$a,BalanceTransactions:()=>Ha,Billing:()=>lp,BillingPortal:()=>up,Charges:()=>Ka,Checkout:()=>cp,Climate:()=>dp,ConfirmationTokens:()=>za,CountrySpecs:()=>Va,Coupons:()=>ja,CreditNotes:()=>Qa,CustomerSessions:()=>Ja,Customers:()=>Ya,Disputes:()=>Xa,Entitlements:()=>pp,EphemeralKeys:()=>el,Events:()=>rl,ExchangeRates:()=>nl,FileLinks:()=>il,Files:()=>al,FinancialConnections:()=>fp,Forwarding:()=>hp,Identity:()=>mp,InvoiceItems:()=>ll,Invoices:()=>ul,Issuing:()=>yp,Mandates:()=>cl,OAuth:()=>pl,PaymentIntents:()=>fl,PaymentLinks:()=>hl,PaymentMethodConfigurations:()=>ml,PaymentMethodDomains:()=>yl,PaymentMethods:()=>vl,Payouts:()=>Pl,Plans:()=>gl,Prices:()=>Tl,Products:()=>Sl,PromotionCodes:()=>El,Quotes:()=>_l,Radar:()=>vp,Refunds:()=>xl,Reporting:()=>Pp,Reviews:()=>bl,SetupAttempts:()=>Ol,SetupIntents:()=>wl,ShippingRates:()=>Rl,Sigma:()=>gp,Sources:()=>Al,SubscriptionItems:()=>Cl,SubscriptionSchedules:()=>Il,Subscriptions:()=>Dl,Tax:()=>Tp,TaxCodes:()=>Gl,TaxIds:()=>Nl,TaxRates:()=>kl,Terminal:()=>Sp,TestHelpers:()=>Ep,Tokens:()=>ql,Topups:()=>Ul,Transfers:()=>Ll,Treasury:()=>_p,WebhookEndpoints:()=>$l});function Nd(t,e){for(let r in e){let o=r[0].toLowerCase()+r.substring(1),i=new e[r](t);this[o]=i}}function R(t,e){return function(r){return new Nd(r,e)}}var er=class{constructor(e,r,o,i){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=o,this.stripeResource=i}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let r=us(this.requestArgs);if(this.index<e.data.length){let o=r?e.data.length-1-this.index:this.index,i=e.data[o];return this.index+=1,{value:i,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let o=await this.pagePromise;return this.iterate(o)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}},uo=class extends er{getNextPage(e){let r=us(this.requestArgs),o=Ud(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:o})}},co=class extends er{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}},ls=(t,e,r,o)=>r.methodType==="search"?as(new co(o,e,r,t)):r.methodType==="list"?as(new uo(o,e,r,t)):null,as=t=>{let e=Ld((...i)=>t.next(...i)),r=$d(e),o={autoPagingEach:e,autoPagingToArray:r,next:()=>t.next(),return:()=>({}),[kd()]:()=>o};return o};function kd(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function Fd(t){if(t.length<2)return null;let e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function qd(t){if(t.length===0)return;let e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(o,i){let s=e(o);i(s)}}function Ud(t,e){let r=e?0:t.data.length-1,o=t.data[r],i=o&&o.id;if(!i)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return i}function Ld(t){return function(){let r=[].slice.call(arguments),o=qd(r),i=Fd(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);let s=Bd(t,o);return tt(s,i)}}function $d(t){return function(r,o){let i=r&&r.limit;if(!i)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(i>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let s=new Promise((a,c)=>{let u=[];t(l=>{if(u.push(l),u.length>=i)return!1}).then(()=>{a(u)}).catch(c)});return tt(s,o)}}function Bd(t,e){return new Promise((r,o)=>{function i(s){if(s.done){r();return}let a=s.value;return new Promise(c=>{e(a,c)}).then(c=>c===!1?i({done:!0,value:void 0}):t().then(i))}t().then(i).catch(o)})}function us(t){let e=[].slice.call(t);return!!Jt(e).ending_before}function cs(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){let r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=Yi(t.fullPath||this.createResourcePathWithSymbols(t.path||""));let o=tt(this._makeRequest(e,t,{}),r);return Object.assign(o,ls(this,e,t,o)),o}}n.extend=Zi;n.method=cs;n.MAX_BUFFERED_REQUEST_METRICS=100;function n(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Qt(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=Qt(this.path),this.initialize(...arguments)}n.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){let r=[this.basePath(e),this.path(e)];if(typeof t=="function"){let o=t(e);o&&r.push(o)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){let o=(e.method||"GET").toUpperCase(),i=e.usage||[],s=e.urlParams||[],a=e.encode||(M=>M),c=!!e.fullPath,u=Qt(c?e.fullPath:e.path||""),l=c?e.fullPath:this.createResourcePathWithSymbols(e.path),d=[].slice.call(t),f=s.reduce((M,A)=>{let L=d.shift();if(typeof L!="string")throw new Error(`Stripe: Argument "${A}" must be a string, but got: ${L} (on API request to \`${o} ${l}\`)`);return M[A]=L,M},{}),p=Jt(d),h=a(Object.assign({},p,r)),m=Xi(d),y=m.host||e.host,g=!!e.streaming;if(d.filter(M=>M!=null).length)throw new Error(`Stripe: Unknown arguments (${d}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${o} \`${l}\`)`);let S=c?u(f):this.createFullPath(u,f),_=Object.assign(m.headers,e.headers);e.validator&&e.validator(h,{headers:_});let v=e.method==="GET"||e.method==="DELETE";return{requestMethod:o,requestPath:S,bodyData:v?{}:h,queryData:v?h:{},auth:m.auth,headers:_,host:y??null,streaming:g,settings:m.settings,usage:i}},_makeRequest(t,e,r){return new Promise((o,i)=>{var s;let a;try{a=this._getRequestOpts(t,e,r)}catch(p){i(p);return}function c(p,h){p?i(p):o(e.transformResponseData?e.transformResponseData(h):h)}let u=Object.keys(a.queryData).length===0,l=[a.requestPath,u?"":"?",re(a.queryData)].join(""),{headers:d,settings:f}=a;this._stripe._requestSender._request(a.requestMethod,a.host,l,a.bodyData,a.auth,{headers:d,settings:f,streaming:a.streaming},a.usage,c,(s=this.requestDataProcessor)===null||s===void 0?void 0:s.bind(this))})}};var pe=n.method,ds=n.extend({retrieve:pe({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:pe({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:pe({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:pe({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:pe({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:pe({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:pe({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})});var ps=n.method,fs=n.extend({retrieve:ps({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:ps({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})});var ot=n.method,hs=n.extend({create:ot({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:ot({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:ot({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),increment:ot({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),reverse:ot({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})});var nt=n.method,ms=n.extend({retrieve:nt({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:nt({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:nt({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:nt({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:nt({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})});var ys=n.method,vs=n.extend({create:ys({method:"POST",fullPath:"/v1/tax/calculations"}),listLineItems:ys({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})});var tr=n.method,Ps=n.extend({create:tr({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:tr({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:tr({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:tr({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})});var rr=n.method,gs=n.extend({deliverCard:rr({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:rr({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:rr({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:rr({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"})});var or=n.method,Ts=n.extend({create:or({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:or({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:or({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:or({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})});var nr=n.method,Ss=n.extend({create:nr({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:nr({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:nr({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:nr({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})});var it=n.method,Es=n.extend({create:it({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:it({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:it({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:it({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:it({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})});var Hd=n.method,_s=n.extend({create:Hd({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})});var Kd=n.method,xs=n.extend({create:Kd({method:"POST",fullPath:"/v1/terminal/connection_tokens"})});var po=n.method,bs=n.extend({create:po({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:po({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:po({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})});var zd=n.method,Os=n.extend({fundCashBalance:zd({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})});var fo=n.method,ws=n.extend({create:fo({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:fo({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:fo({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})});var st=n.method,Rs=n.extend({create:st({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:st({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:st({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:st({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:st({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})});var As=n.method,Cs=n.extend({retrieve:As({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:As({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})});var ir=n.method,Is=n.extend({create:ir({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:ir({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:ir({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:ir({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})});var Ce=n.method,Ds=n.extend({create:Ce({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:Ce({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:Ce({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:Ce({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),retrieveFeatures:Ce({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:Ce({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})});var ho=n.method,Ms=n.extend({fail:ho({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:ho({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:ho({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})});var sr=n.method,Gs=n.extend({create:sr({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:sr({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:sr({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:sr({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})});var at=n.method,Ns=n.extend({create:at({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:at({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:at({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:at({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:at({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})});var Wd=n.method,ks=n.extend({create:Wd({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})});var Vd=n.method,Fs=n.extend({create:Vd({method:"POST",fullPath:"/v1/billing/meter_events"})});var fe=n.method,qs=n.extend({create:fe({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:fe({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:fe({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:fe({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:fe({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:fe({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:fe({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})});var lt=n.method,Us=n.extend({create:lt({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:lt({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:lt({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:lt({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:lt({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})});var mo=n.method,Ls=n.extend({fail:mo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:mo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:mo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})});var ar=n.method,$s=n.extend({create:ar({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:ar({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:ar({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:ar({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})});var yo=n.method,Bs=n.extend({fail:yo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:yo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:yo({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})});var lr=n.method,Hs=n.extend({create:lr({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:lr({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:lr({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:lr({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})});var vo=n.method,Ks=n.extend({activate:vo({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:vo({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:vo({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})});var ur=n.method,zs=n.extend({create:ur({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:ur({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:ur({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:ur({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})});var Ws=n.method,Vs=n.extend({retrieve:Ws({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:Ws({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})});var js=n.method,Qs=n.extend({retrieve:js({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:js({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})});var jd=n.method,Js=n.extend({presentPaymentMethod:jd({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})});var K=n.method,Ys=n.extend({create:K({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:K({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:K({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:K({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})});var Qd=n.method,Xs=n.extend({create:Qd({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})});var Zs=n.method,ea=n.extend({retrieve:Zs({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:Zs({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})});var Jd=n.method,ta=n.extend({create:Jd({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})});var ra=n.method,oa=n.extend({retrieve:ra({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:ra({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})});var Yd=n.method,na=n.extend({expire:Yd({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})});var cr=n.method,ia=n.extend({create:cr({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:cr({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:cr({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:cr({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})});var Po=n.method,sa=n.extend({create:Po({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Po({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Po({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})});var aa=n.method,la=n.extend({retrieve:aa({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:aa({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})});var go=n.method,ua=n.extend({create:go({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:go({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:go({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})});var ca=n.method,da=n.extend({retrieve:ca({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:ca({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})});var dr=n.method,pa=n.extend({create:dr({method:"POST",fullPath:"/v1/apps/secrets"}),list:dr({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:dr({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:dr({method:"GET",fullPath:"/v1/apps/secrets/find"})});var Xd=n.method,fa=n.extend({create:Xd({method:"POST",fullPath:"/v1/billing_portal/sessions"})});var ut=n.method,ha=n.extend({create:ut({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:ut({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),list:ut({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:ut({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:ut({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})});var ma=n.method,ya=n.extend({create:ma({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:ma({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})});var va=n.method,Pa=n.extend({retrieve:va({method:"GET",fullPath:"/v1/tax/settings"}),update:va({method:"POST",fullPath:"/v1/tax/settings"})});var ga=n.method,Ta=n.extend({retrieve:ga({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:ga({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})});var ct=n.method,Sa=n.extend({create:ct({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:ct({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:ct({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:ct({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:ct({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})});var To=n.method,Ea=n.extend({retrieve:To({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:To({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:To({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})});var _a=n.method,xa=n.extend({retrieve:_a({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:_a({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})});var So=n.method,ba=n.extend({createForceCapture:So({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:So({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:So({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})});var Oa=n.method,wa=n.extend({retrieve:Oa({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:Oa({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})});var Eo=n.method,Ra=n.extend({retrieve:Eo({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:Eo({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:Eo({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})});var pr=n.method,Aa=n.extend({retrieve:pr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:pr({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:pr({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:pr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})});var Ca=n.method,Ia=n.extend({retrieve:Ca({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Ca({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})});var fr=n.method,Da=n.extend({create:fr({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:fr({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:fr({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:fr({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})});var dt=n.method,Ma=n.extend({create:dt({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:dt({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:dt({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:dt({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:dt({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})});var Ga=n.method,Na=n.extend({retrieve:Ga({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:Ga({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})});var Ie=n.method,ka=n.extend({create:Ie({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:Ie({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:Ie({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:Ie({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:Ie({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:Ie({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})});var b=n.method,_o=n.extend({create:b({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?b({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),b({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:b({method:"POST",fullPath:"/v1/accounts/{account}"}),list:b({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:b({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:b({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:b({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:b({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:b({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:b({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:b({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:b({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:b({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:b({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:b({method:"GET",fullPath:"/v1/account"}),retrieveCapability:b({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:b({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:b({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:b({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:b({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:b({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})});var Zd=n.method,Fa=n.extend({create:Zd({method:"POST",fullPath:"/v1/account_links"})});var ep=n.method,qa=n.extend({create:ep({method:"POST",fullPath:"/v1/account_sessions"})});var hr=n.method,Ua=n.extend({create:hr({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:hr({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:hr({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:hr({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})});var De=n.method,La=n.extend({retrieve:De({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:De({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:De({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:De({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:De({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:De({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})});var tp=n.method,$a=n.extend({retrieve:tp({method:"GET",fullPath:"/v1/balance"})});var Ba=n.method,Ha=n.extend({retrieve:Ba({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:Ba({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})});var Me=n.method,Ka=n.extend({create:Me({method:"POST",fullPath:"/v1/charges"}),retrieve:Me({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Me({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Me({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Me({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Me({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})});var rp=n.method,za=n.extend({retrieve:rp({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})});var Wa=n.method,Va=n.extend({retrieve:Wa({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:Wa({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})});var pt=n.method,ja=n.extend({create:pt({method:"POST",fullPath:"/v1/coupons"}),retrieve:pt({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:pt({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:pt({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:pt({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})});var oe=n.method,Qa=n.extend({create:oe({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:oe({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:oe({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:oe({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:oe({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:oe({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:oe({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:oe({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})});var op=n.method,Ja=n.extend({create:op({method:"POST",fullPath:"/v1/customer_sessions"})});var E=n.method,Ya=n.extend({create:E({method:"POST",fullPath:"/v1/customers"}),retrieve:E({method:"GET",fullPath:"/v1/customers/{customer}"}),update:E({method:"POST",fullPath:"/v1/customers/{customer}"}),list:E({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:E({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:E({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:E({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:E({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:E({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:E({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:E({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:E({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:E({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:E({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:E({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:E({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:E({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:E({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:E({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:E({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:E({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:E({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})});var mr=n.method,Xa=n.extend({retrieve:mr({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:mr({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:mr({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:mr({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})});var Za=n.method,el=n.extend({create:Za({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:Za({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})});var tl=n.method,rl=n.extend({retrieve:tl({method:"GET",fullPath:"/v1/events/{id}"}),list:tl({method:"GET",fullPath:"/v1/events",methodType:"list"})});var ol=n.method,nl=n.extend({retrieve:ol({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:ol({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})});var yr=n.method,il=n.extend({create:yr({method:"POST",fullPath:"/v1/file_links"}),retrieve:yr({method:"GET",fullPath:"/v1/file_links/{link}"}),update:yr({method:"POST",fullPath:"/v1/file_links/{link}"}),list:yr({method:"GET",fullPath:"/v1/file_links",methodType:"list"})});var np=(t,e,r)=>{let o=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${o}`;let i=new TextEncoder,s=new Uint8Array(0),a=i.encode(`\r
`);function c(d){let f=s,p=d instanceof Uint8Array?d:new Uint8Array(i.encode(d));s=new Uint8Array(f.length+p.length+2),s.set(f),s.set(p,f.length),s.set(a,s.length-2)}function u(d){return`"${d.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let l=rs(e);for(let d in l){let f=l[d];if(c(`--${o}`),Object.prototype.hasOwnProperty.call(f,"data")){let p=f;c(`Content-Disposition: form-data; name=${u(d)}; filename=${u(p.name||"blob")}`),c(`Content-Type: ${p.type||"application/octet-stream"}`),c(""),c(p.data)}else c(`Content-Disposition: form-data; name=${u(d)}`),c(""),c(f)}return c(`--${o}--`),s};function sl(t,e,r,o){if(e=e||{},t!=="POST")return o(null,re(e));this._stripe._platformFunctions.tryBufferData(e).then(i=>{let s=np(t,i,r);return o(null,s)}).catch(i=>o(i,null))}var xo=n.method,al=n.extend({create:xo({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:xo({method:"GET",fullPath:"/v1/files/{file}"}),list:xo({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:sl});var ft=n.method,ll=n.extend({create:ft({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:ft({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:ft({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:ft({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:ft({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})});var G=n.method,ul=n.extend({create:G({method:"POST",fullPath:"/v1/invoices"}),retrieve:G({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:G({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:G({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:G({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),finalizeInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:G({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:G({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:G({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:G({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),retrieveUpcoming:G({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:G({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLineItem:G({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})});var ip=n.method,cl=n.extend({retrieve:ip({method:"GET",fullPath:"/v1/mandates/{mandate}"})});var dl=n.method,bo="connect.stripe.com",pl=n.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${bo}/${r}?${re(t)}`},token:dl({method:"POST",path:"oauth/token",host:bo}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),dl({method:"POST",path:"oauth/deauthorize",host:bo}).apply(this,[t,...e])}});var U=n.method,fl=n.extend({create:U({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:U({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:U({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:U({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:U({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:U({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:U({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:U({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:U({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:U({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:U({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})});var ht=n.method,hl=n.extend({create:ht({method:"POST",fullPath:"/v1/payment_links"}),retrieve:ht({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:ht({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:ht({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:ht({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})});var vr=n.method,ml=n.extend({create:vr({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:vr({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:vr({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:vr({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})});var mt=n.method,yl=n.extend({create:mt({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:mt({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:mt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:mt({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:mt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})});var Ge=n.method,vl=n.extend({create:Ge({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Ge({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Ge({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Ge({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Ge({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Ge({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})});var Ne=n.method,Pl=n.extend({create:Ne({method:"POST",fullPath:"/v1/payouts"}),retrieve:Ne({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:Ne({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:Ne({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:Ne({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:Ne({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})});var yt=n.method,gl=n.extend({create:yt({method:"POST",fullPath:"/v1/plans"}),retrieve:yt({method:"GET",fullPath:"/v1/plans/{plan}"}),update:yt({method:"POST",fullPath:"/v1/plans/{plan}"}),list:yt({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:yt({method:"DELETE",fullPath:"/v1/plans/{plan}"})});var vt=n.method,Tl=n.extend({create:vt({method:"POST",fullPath:"/v1/prices"}),retrieve:vt({method:"GET",fullPath:"/v1/prices/{price}"}),update:vt({method:"POST",fullPath:"/v1/prices/{price}"}),list:vt({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:vt({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})});var z=n.method,Sl=n.extend({create:z({method:"POST",fullPath:"/v1/products"}),retrieve:z({method:"GET",fullPath:"/v1/products/{id}"}),update:z({method:"POST",fullPath:"/v1/products/{id}"}),list:z({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:z({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:z({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:z({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:z({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:z({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:z({method:"GET",fullPath:"/v1/products/search",methodType:"search"})});var Pr=n.method,El=n.extend({create:Pr({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Pr({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Pr({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Pr({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})});var W=n.method,_l=n.extend({create:W({method:"POST",fullPath:"/v1/quotes"}),retrieve:W({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:W({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:W({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:W({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:W({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:W({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:W({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:W({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:W({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})});var Pt=n.method,xl=n.extend({create:Pt({method:"POST",fullPath:"/v1/refunds"}),retrieve:Pt({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Pt({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Pt({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Pt({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})});var Oo=n.method,bl=n.extend({retrieve:Oo({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Oo({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Oo({method:"POST",fullPath:"/v1/reviews/{review}/approve"})});var sp=n.method,Ol=n.extend({list:sp({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})});var he=n.method,wl=n.extend({create:he({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:he({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:he({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:he({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:he({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:he({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:he({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})});var gr=n.method,Rl=n.extend({create:gr({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:gr({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:gr({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:gr({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})});var gt=n.method,Al=n.extend({create:gt({method:"POST",fullPath:"/v1/sources"}),retrieve:gt({method:"GET",fullPath:"/v1/sources/{source}"}),update:gt({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:gt({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:gt({method:"POST",fullPath:"/v1/sources/{source}/verify"})});var me=n.method,Cl=n.extend({create:me({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:me({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:me({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:me({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:me({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:me({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:me({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})});var ke=n.method,Il=n.extend({create:ke({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:ke({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:ke({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:ke({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:ke({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:ke({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})});var ne=n.method,Dl=n.extend({create:ne({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:ne({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:ne({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:ne({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:ne({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:ne({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:ne({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:ne({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})});var Ml=n.method,Gl=n.extend({retrieve:Ml({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:Ml({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})});var Tr=n.method,Nl=n.extend({create:Tr({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Tr({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Tr({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Tr({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})});var Sr=n.method,kl=n.extend({create:Sr({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Sr({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Sr({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Sr({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})});var Fl=n.method,ql=n.extend({create:Fl({method:"POST",fullPath:"/v1/tokens"}),retrieve:Fl({method:"GET",fullPath:"/v1/tokens/{token}"})});var Tt=n.method,Ul=n.extend({create:Tt({method:"POST",fullPath:"/v1/topups"}),retrieve:Tt({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Tt({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Tt({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Tt({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})});var ie=n.method,Ll=n.extend({create:ie({method:"POST",fullPath:"/v1/transfers"}),retrieve:ie({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:ie({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:ie({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:ie({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:ie({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:ie({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:ie({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})});var St=n.method,$l=n.extend({create:St({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:St({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:St({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:St({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:St({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})});var ap=R("apps",{Secrets:pa}),lp=R("billing",{MeterEventAdjustments:ks,MeterEvents:Fs,Meters:qs}),up=R("billingPortal",{Configurations:Ss,Sessions:fa}),cp=R("checkout",{Sessions:ha}),dp=R("climate",{Orders:Us,Products:Qs,Suppliers:Ta}),pp=R("entitlements",{ActiveEntitlements:fs,Features:Is}),fp=R("financialConnections",{Accounts:ds,Sessions:ya,Transactions:wa}),hp=R("forwarding",{Requests:ua}),mp=R("identity",{VerificationReports:Na,VerificationSessions:ka}),yp=R("issuing",{Authorizations:ms,Cardholders:Ps,Cards:Ts,Disputes:Rs,PersonalizationDesigns:zs,PhysicalBundles:Vs,Tokens:Ea,Transactions:Ra}),vp=R("radar",{EarlyFraudWarnings:Cs,ValueListItems:Da,ValueLists:Ma}),Pp=R("reporting",{ReportRuns:sa,ReportTypes:la}),gp=R("sigma",{ScheduledQueryRuns:da}),Tp=R("tax",{Calculations:vs,Registrations:ia,Settings:Pa,Transactions:Aa}),Sp=R("terminal",{Configurations:Es,ConnectionTokens:xs,Locations:Ns,Readers:Ys}),Ep=R("testHelpers",{ConfirmationTokens:_s,Customers:Os,Refunds:na,TestClocks:Sa,Issuing:R("issuing",{Authorizations:hs,Cards:gs,PersonalizationDesigns:Ks,Transactions:ba}),Terminal:R("terminal",{Readers:Js}),Treasury:R("treasury",{InboundTransfers:Ms,OutboundPayments:Ls,OutboundTransfers:Bs,ReceivedCredits:Xs,ReceivedDebits:ta})}),_p=R("treasury",{CreditReversals:bs,DebitReversals:ws,FinancialAccounts:Ds,InboundTransfers:Gs,OutboundPayments:$s,OutboundTransfers:Hs,ReceivedCredits:ea,ReceivedDebits:oa,TransactionEntries:xa,Transactions:Ia});var xp=60,Er=class t{constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,o){let i=Date.now(),s=i-e.request_start_time;return Yt({api_version:o["stripe-version"],account:o["stripe-account"],idempotency_key:o["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(o),elapsed:s,request_start_time:e.request_start_time,request_end_time:i})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,o){return i=>{let s=i.getHeaders(),a=()=>{let u=this._makeResponseEvent(e,i.getStatusCode(),s);this._stripe._emitter.emit("response",u),this._recordRequestMetrics(this._getRequestId(s),u.elapsed,r)},c=i.toStream(a);return this._addHeadersDirectlyToObject(c,s),o(null,c)}}_jsonResponseHandler(e,r,o){return i=>{let s=i.getHeaders(),a=this._getRequestId(s),c=i.getStatusCode(),u=this._makeResponseEvent(e,c,s);this._stripe._emitter.emit("response",u),i.toJSON().then(l=>{if(l.error){let d;throw typeof l.error=="string"&&(l.error={type:l.error,message:l.error_description}),l.error.headers=s,l.error.statusCode=c,l.error.requestId=a,c===401?d=new Se(l.error):c===403?d=new Be(l.error):c===429?d=new Ee(l.error):d=w.generate(l.error),d}return l},l=>{throw new Te({message:"Invalid JSON received from the Stripe API",exception:l,requestId:s["request-id"]})}).then(l=>{this._recordRequestMetrics(a,u.elapsed,r);let d=i.getRawResponse();this._addHeadersDirectlyToObject(d,s),Object.defineProperty(l,"lastResponse",{enumerable:!1,writable:!1,value:d}),o(null,l)},l=>o(l,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,o,i){return i&&r===0&&D.CONNECTION_CLOSED_ERROR_CODES.includes(i.code)?!0:r>=o?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){let o=this._stripe.getInitialNetworkRetryDelay(),i=this._stripe.getMaxNetworkRetryDelay(),s=Math.min(o*Math.pow(e-1,2),i);return s*=.5*(1+Math.random()),s=Math.max(o,s),Number.isInteger(r)&&r<=xp&&(s=Math.max(s,r)),s*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r){let o=this._getMaxNetworkRetries(r);return e==="POST"&&o>0?`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`:null}_makeHeaders(e,r,o,i,s,a,c){let u={Authorization:e?`Bearer ${e}`:this._stripe.getApiField("auth"),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","User-Agent":this._getUserAgentString(),"X-Stripe-Client-User-Agent":i,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":o,"Stripe-Account":this._stripe.getApiField("stripeAccount"),"Idempotency-Key":this._defaultIdempotencyKey(s,c)},l=s=="POST"||s=="PUT"||s=="PATCH";return(l||r)&&(l||rt(`${s} method had non-zero contentLength but no payload is expected for this verb`),u["Content-Length"]=r),Object.assign(Yt(u),es(a))}_getUserAgentString(){let e=this._stripe.getConstant("PACKAGE_VERSION"),r=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/v1 NodeBindings/${e} ${r}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,o){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)rt("Request metrics buffer is full, dropping telemetry message.");else{let i={request_id:e,request_duration_ms:r};o&&o.length>0&&(i.usage=o),this._stripe._prevRequestMetrics.push(i)}}_request(e,r,o,i,s,a={},c=[],u,l=null){let d,f=(m,y,g,S,_)=>setTimeout(m,this._getSleepTimeInMS(S,_),y,g,S+1),p=(m,y,g)=>{let S=a.settings&&a.settings.timeout&&Number.isInteger(a.settings.timeout)&&a.settings.timeout>=0?a.settings.timeout:this._stripe.getApiField("timeout"),_=this._stripe.getApiField("httpClient").makeRequest(r||this._stripe.getApiField("host"),this._stripe.getApiField("port"),o,e,y,d,this._stripe.getApiField("protocol"),S),v=Date.now(),O=Yt({api_version:m,account:y["Stripe-Account"],idempotency_key:y["Idempotency-Key"],method:e,path:o,request_start_time:v}),N=g||0,M=this._getMaxNetworkRetries(a.settings||{});this._stripe._emitter.emit("request",O),_.then(A=>t._shouldRetry(A,N,M)?f(p,m,y,N,A.getHeaders()["retry-after"]):a.streaming&&A.getStatusCode()<400?this._streamingResponseHandler(O,c,u)(A):this._jsonResponseHandler(O,c,u)(A)).catch(A=>{if(t._shouldRetry(null,N,M,A))return f(p,m,y,N,null);{let L=A.code&&A.code===D.TIMEOUT_ERROR_CODE;return u(new He({message:L?`Request aborted due to timeout being reached (${S}ms)`:t._generateConnectionErrorMessage(N),detail:A}))}})},h=(m,y)=>{if(m)return u(m);d=y,this._stripe.getClientUserAgent(g=>{var S,_;let v=this._stripe.getApiField("version"),O=this._makeHeaders(s,d.length,v,g,e,(S=a.headers)!==null&&S!==void 0?S:null,(_=a.settings)!==null&&_!==void 0?_:{});p(v,O,0)})};l?l(e,i,a.headers,h):h(null,re(i||{}))}};function wo(t){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(l,d,f,p,h,m){try{this.signature.verifyHeader(l,d,f,p||e.DEFAULT_TOLERANCE,h,m)}catch(g){throw g instanceof ge&&(g.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),g}return l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},async constructEventAsync(l,d,f,p,h,m){return await this.signature.verifyHeaderAsync(l,d,f,p||e.DEFAULT_TOLERANCE,h,m),l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},generateTestHeaderString:function(l){if(!l)throw new w({message:"Options are required"});return l.timestamp=Math.floor(l.timestamp)||Math.floor(Date.now()/1e3),l.scheme=l.scheme||r.EXPECTED_SCHEME,l.cryptoProvider=l.cryptoProvider||u(),l.signature=l.signature||l.cryptoProvider.computeHMACSignature(l.timestamp+"."+l.payload,l.secret),["t="+l.timestamp,l.scheme+"="+l.signature].join(",")}},r={EXPECTED_SCHEME:"v1",verifyHeader(l,d,f,p,h,m){let{decodedHeader:y,decodedPayload:g,details:S,suspectPayloadType:_}=i(l,d,this.EXPECTED_SCHEME),v=/\s/.test(f);h=h||u();let O=h.computeHMACSignature(o(g,S),f);return s(g,y,S,O,p,_,v,m),!0},async verifyHeaderAsync(l,d,f,p,h,m){let{decodedHeader:y,decodedPayload:g,details:S,suspectPayloadType:_}=i(l,d,this.EXPECTED_SCHEME),v=/\s/.test(f);h=h||u();let O=await h.computeHMACSignatureAsync(o(g,S),f);return s(g,y,S,O,p,_,v,m)}};function o(l,d){return`${d.timestamp}.${l}`}function i(l,d,f){if(!l)throw new q(d,l,{message:"No webhook payload was provided."});let p=typeof l!="string"&&!(l instanceof Uint8Array),h=new TextDecoder("utf8"),m=l instanceof Uint8Array?h.decode(l):l;if(Array.isArray(d))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(d==null||d=="")throw new q(d,l,{message:"No stripe-signature header value was provided."});let y=d instanceof Uint8Array?h.decode(d):d,g=a(y,f);if(!g||g.timestamp===-1)throw new q(y,m,{message:"Unable to extract timestamp and signatures from header"});if(!g.signatures.length)throw new q(y,m,{message:"No signatures found with expected scheme"});return{decodedPayload:m,decodedHeader:y,details:g,suspectPayloadType:p}}function s(l,d,f,p,h,m,y,g){let S=!!f.signatures.filter(t.secureCompare.bind(t,p)).length,_=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://github.com/stripe/stripe-node#webhook-signing`,v=y?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!S)throw m?new q(d,l,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+_+`
`+v}):new q(d,l,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+_+`
`+v});let O=Math.floor((typeof g=="number"?g:Date.now())/1e3)-f.timestamp;if(h>0&&O>h)throw new q(d,l,{message:"Timestamp outside the tolerance zone"});return!0}function a(l,d){return typeof l!="string"?null:l.split(",").reduce((f,p)=>{let h=p.split("=");return h[0]==="t"&&(f.timestamp=parseInt(h[1],10)),h[0]===d&&f.signatures.push(h[1]),f},{timestamp:-1,signatures:[]})}let c=null;function u(){return c||(c=t.createDefaultCryptoProvider()),c}return e.signature=r,e}var Bl="api.stripe.com",Hl="443",Kl="/v1/",zl=ss,Wl=8e4,Vl=2,jl=.5,bp=["name","version","url","partner_id"],Ql=["apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount"],Op=t=>new Er(t,n.MAX_BUFFERED_REQUEST_METRICS);function Jl(t,e=Op){o.PACKAGE_VERSION="14.25.0",o.USER_AGENT=Object.assign({bindings_version:o.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},os()),o.StripeResource=n,o.resources=Et,o.HttpClient=D,o.HttpClientResponse=Z,o.CryptoProvider=X;function r(i=t){return wo(i)}o.webhooks=Object.assign(r,wo(t));function o(i,s={}){if(!(this instanceof o))return new o(i,s);let a=this._getPropsFromConfig(s);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=o.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let c=a.httpAgent||null;this._api={auth:null,host:a.host||Bl,port:a.port||Hl,protocol:a.protocol||"https",basePath:Kl,version:a.apiVersion||zl,timeout:Xt("timeout",a.timeout,Wl),maxNetworkRetries:Xt("maxNetworkRetries",a.maxNetworkRetries,1),agent:c,httpClient:a.httpClient||(c?this._platformFunctions.createNodeHttpClient(c):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:a.stripeAccount||null};let u=a.typescript||!1;u!==o.USER_AGENT.typescript&&(o.USER_AGENT.typescript=u),a.appInfo&&this._setAppInfo(a.appInfo),this._prepResources(),this._setApiKey(i),this.errors=Gt,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=a.telemetry!==!1,this._requestSender=e(this),this.StripeResource=o.StripeResource}return o.errors=Gt,o.createNodeHttpClient=t.createNodeHttpClient,o.createFetchHttpClient=t.createFetchHttpClient,o.createNodeCryptoProvider=t.createNodeCryptoProvider,o.createSubtleCryptoProvider=t.createSubtleCryptoProvider,o.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,_setApiKey(i){i&&this._setApiField("auth",`Bearer ${i}`)},_setAppInfo(i){if(i&&typeof i!="object")throw new Error("AppInfo must be an object.");if(i&&!i.name)throw new Error("AppInfo.name is required");i=i||{},this._appInfo=bp.reduce((s,a)=>(typeof i[a]=="string"&&(s=s||{},s[a]=i[a]),s),void 0)},_setApiField(i,s){this._api[i]=s},getApiField(i){return this._api[i]},setClientId(i){this._clientId=i},getClientId(){return this._clientId},getConstant:i=>{switch(i){case"DEFAULT_HOST":return Bl;case"DEFAULT_PORT":return Hl;case"DEFAULT_BASE_PATH":return Kl;case"DEFAULT_API_VERSION":return zl;case"DEFAULT_TIMEOUT":return Wl;case"MAX_NETWORK_RETRY_DELAY_SEC":return Vl;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return jl}return o[i]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(i,s,a){let c=Xt(i,s,a);this._setApiField(i,c)},getMaxNetworkRetryDelay(){return Vl},getInitialNetworkRetryDelay(){return jl},getClientUserAgent(i){return this.getClientUserAgentSeeded(o.USER_AGENT,i)},getClientUserAgentSeeded(i,s){this._platformFunctions.getUname().then(a=>{var c;let u={};for(let d in i)u[d]=encodeURIComponent((c=i[d])!==null&&c!==void 0?c:"null");u.uname=encodeURIComponent(a||"UNKNOWN");let l=this.getApiField("httpClient");l&&(u.httplib=encodeURIComponent(l.getClientName())),this._appInfo&&(u.application=this._appInfo),s(JSON.stringify(u))})},getAppInfoAsString(){if(!this._appInfo)return"";let i=this._appInfo.name;return this._appInfo.version&&(i+=`/${this._appInfo.version}`),this._appInfo.url&&(i+=` (${this._appInfo.url})`),i},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let i in Et)this[ts(i)]=new Et[i](this)},_getPropsFromConfig(i){if(!i)return{};let s=typeof i=="string";if(!(i===Object(i)&&!Array.isArray(i))&&!s)throw new Error("Config must either be an object or a string");if(s)return{apiVersion:i};if(Object.keys(i).filter(u=>!Ql.includes(u)).length>0)throw new Error(`Config object may only contain the following: ${Ql.join(", ")}`);return i}},o}var wp=Jl(new Zt),Ro=wp;var ye=process.env.DDB_TABLE_NAME,Rp=process.env.STRIPE_SECRET_KEY,Yl=process.env.AWS_REGION||"eu-central-1",Ap=new Fe.DynamoDBClient({region:Yl}),ve=k.DynamoDBDocumentClient.from(Ap),Ao=new Ro(Rp),Cp=new qe.SchedulerClient({region:Yl});async function V(t,e,r){let o=new Date().toISOString();try{await ve.send(new k.PutCommand({TableName:ye,Item:{PK:`BOOKING#${t}`,SK:`EVENT#${o}#${e}`,type:"EVENT",eventName:e,at:o,meta:r}}))}catch(i){console.error(`[Deadline] Failed to write ${e} event (non-fatal):`,i)}}async function Ip(t){let e=`boekdichtbij-wave2-${t}`;try{await Cp.send(new qe.DeleteScheduleCommand({Name:e,GroupName:"default"})),console.log("[Deadline] Deleted Wave 2 schedule:",e)}catch(r){r instanceof qe.ResourceNotFoundException?console.log("[Deadline] Wave 2 schedule not found (already deleted):",e):console.error("[Deadline] Failed to delete Wave 2 schedule (non-fatal):",e,r)}}function Dp(t){return t instanceof Ro.errors.StripeError&&t.code==="charge_already_refunded"}async function Mp(t){let{bookingId:e}=t;if(!e)return console.error("[Deadline] Missing bookingId in event"),{statusCode:400,body:"Missing bookingId"};console.log("[Deadline] Processing booking:",e);let r;try{let f=await ve.send(new k.GetCommand({TableName:ye,Key:{PK:`BOOKING#${e}`,SK:"BOOKING"}}));if(!f.Item)return console.log("[Deadline] Booking not found:",e),{statusCode:200,body:"Booking not found"};r=f.Item}catch(f){return console.error("[Deadline] Failed to load booking:",e,f),{statusCode:200,body:"Failed to load booking"}}if(r.status==="ASSIGNED"||r.assignedProviderId)return console.log("[Deadline] Booking already assigned:",e),{statusCode:200,body:"Already assigned"};if(r.status==="REFUNDED"||r.refundId)return console.log("[Deadline] Booking already refunded:",e,r.refundId),{statusCode:200,body:"Already refunded"};if(!(r.status==="PENDING_ASSIGNMENT"||r.status==="UNFILLED"&&r.refundState==="REFUND_PENDING"||r.status==="UNFILLED"&&!r.refundState))return console.log("[Deadline] Booking in unexpected state:",e,r.status),{statusCode:200,body:`Unexpected status: ${r.status}`};if(r.status==="PENDING_ASSIGNMENT"&&r.assignmentDeadline){let f=new Date(r.assignmentDeadline);if(new Date<f)return console.log("[Deadline] Deadline not yet reached:",e,r.assignmentDeadline),{statusCode:200,body:"Deadline not reached"}}let i=new Date().toISOString();if(r.status==="PENDING_ASSIGNMENT")try{await ve.send(new k.UpdateCommand({TableName:ye,Key:{PK:`BOOKING#${e}`,SK:"BOOKING"},UpdateExpression:`
            SET #status = :unfilled,
                unfilledAt = :now,
                updatedAt = :now,
                GSI1PK = :gsi1pk,
                GSI1SK = :gsi1sk
          `,ConditionExpression:"#status = :pending AND attribute_not_exists(assignedProviderId)",ExpressionAttributeNames:{"#status":"status"},ExpressionAttributeValues:{":unfilled":"UNFILLED",":pending":"PENDING_ASSIGNMENT",":now":i,":gsi1pk":`AREA#${r.area}#STATUS#UNFILLED`,":gsi1sk":`CREATED#${r.createdAt}#BOOKING#${e}`}})),console.log("[Deadline] Marked as UNFILLED:",e),await V(e,"booking_unfilled",{reason:"deadline_expired"}),r.status="UNFILLED"}catch(f){if(f instanceof Fe.ConditionalCheckFailedException){console.log("[Deadline] UNFILLED transition failed, reloading booking:",e);let p=await ve.send(new k.GetCommand({TableName:ye,Key:{PK:`BOOKING#${e}`,SK:"BOOKING"}}));if(!p.Item)return{statusCode:200,body:"Booking disappeared"};let h=p.Item;if(h.status==="ASSIGNED"||h.assignedProviderId)return console.log("[Deadline] Booking was assigned during processing:",e),{statusCode:200,body:"Assigned during processing"};if(h.status==="REFUNDED"||h.refundId)return console.log("[Deadline] Booking was refunded during processing:",e),{statusCode:200,body:"Refunded during processing"};if(h.status==="UNFILLED")r=h;else return console.log("[Deadline] Unexpected state after reload:",e,h.status),{statusCode:200,body:`Unexpected state: ${h.status}`}}else return console.error("[Deadline] Failed to mark as UNFILLED:",e,f),await V(e,"unfilled_transition_failed",{error:f instanceof Error?f.message:String(f)}),{statusCode:200,body:"UNFILLED transition failed"}}let s=r.stripePaymentIntentId||null;if(!s){if(!r.stripeSessionId)return console.error("[Deadline] No stripeSessionId for booking:",e),await V(e,"refund_skipped",{reason:"no_stripe_session"}),{statusCode:200,body:"No Stripe session"};try{if(s=(await Ao.checkout.sessions.retrieve(r.stripeSessionId)).payment_intent,!s)return console.error("[Deadline] No payment_intent in session:",r.stripeSessionId),await V(e,"refund_skipped",{reason:"no_payment_intent"}),{statusCode:200,body:"No payment intent"};console.log("[Deadline] Found payment intent:",s)}catch(f){return console.error("[Deadline] Failed to retrieve Stripe session:",f),await V(e,"stripe_session_retrieval_failed",{stripeSessionId:r.stripeSessionId,error:f instanceof Error?f.message:String(f)}),{statusCode:200,body:"Stripe session retrieval failed"}}}let a=new Date().toISOString();try{await ve.send(new k.UpdateCommand({TableName:ye,Key:{PK:`BOOKING#${e}`,SK:"BOOKING"},UpdateExpression:`
          SET refundState = :pending,
              refundAttemptedAt = :attemptedAt,
              stripePaymentIntentId = :paymentIntentId,
              updatedAt = :attemptedAt
        `,ConditionExpression:"attribute_not_exists(refundState) OR refundState <> :refunded",ExpressionAttributeValues:{":pending":"REFUND_PENDING",":refunded":"REFUNDED",":attemptedAt":a,":paymentIntentId":s}})),console.log("[Deadline] Set REFUND_PENDING marker:",e)}catch(f){if(f instanceof Fe.ConditionalCheckFailedException)return console.log("[Deadline] refundState already REFUNDED:",e),{statusCode:200,body:"Already refunded"};console.error("[Deadline] Failed to set REFUND_PENDING:",e,f)}let c=`refund:${e}`,u,l;try{let f=await Ao.refunds.create({payment_intent:s,reason:"requested_by_customer",metadata:{bookingId:e,reason:"deadline_expired"}},{idempotencyKey:c});u=f.id,l=f.amount,console.log("[Deadline] Refund created/retrieved:",u,"amount:",l)}catch(f){if(Dp(f)){console.log("[Deadline] Charge already refunded, fetching existing refund:",e);try{let p=await Ao.refunds.list({payment_intent:s,limit:1});if(p.data.length>0)u=p.data[0].id,l=p.data[0].amount,console.log("[Deadline] Found existing refund:",u);else return console.error("[Deadline] No refunds found for payment intent:",s),await V(e,"refund_sync_failed",{paymentIntentId:s,reason:"no_refunds_found"}),{statusCode:200,body:"Refund sync failed"}}catch(p){return console.error("[Deadline] Failed to list refunds:",p),await V(e,"refund_list_failed",{paymentIntentId:s,error:p instanceof Error?p.message:String(p)}),{statusCode:200,body:"Failed to list refunds"}}}else return console.error("[Deadline] Failed to create refund:",f),await V(e,"refund_failed",{paymentIntentId:s,idempotencyKey:c,error:f instanceof Error?f.message:String(f)}),{statusCode:200,body:"Refund failed"}}let d=new Date().toISOString();try{await ve.send(new k.UpdateCommand({TableName:ye,Key:{PK:`BOOKING#${e}`,SK:"BOOKING"},UpdateExpression:`
          SET #status = :refunded,
              refundedAt = :refundedAt,
              refundId = :refundId,
              refundState = :refundState,
              updatedAt = :refundedAt,
              GSI1PK = :gsi1pk,
              GSI1SK = :gsi1sk
        `,ConditionExpression:"#status = :unfilled OR refundState = :pendingState",ExpressionAttributeNames:{"#status":"status"},ExpressionAttributeValues:{":refunded":"REFUNDED",":refundedAt":d,":refundId":u,":refundState":"REFUNDED",":unfilled":"UNFILLED",":pendingState":"REFUND_PENDING",":gsi1pk":`AREA#${r.area}#STATUS#REFUNDED`,":gsi1sk":`CREATED#${r.createdAt}#BOOKING#${e}`}})),console.log("[Deadline] Marked as REFUNDED:",e,"refundId:",u)}catch(f){if(f instanceof Fe.ConditionalCheckFailedException){let p=await ve.send(new k.GetCommand({TableName:ye,Key:{PK:`BOOKING#${e}`,SK:"BOOKING"}}));if(p.Item?.status==="REFUNDED")return console.log("[Deadline] Booking already REFUNDED (race):",e),{statusCode:200,body:"Already refunded"};console.error("[Deadline] REFUNDED transition failed unexpectedly:",e,p.Item?.status)}else console.error("[Deadline] Failed to mark as REFUNDED:",e,f);return await V(e,"refunded_transition_failed",{refundId:u,paymentIntentId:s,error:f instanceof Error?f.message:String(f)}),{statusCode:200,body:"REFUNDED transition failed"}}return await V(e,"refund_issued",{refundId:u,paymentIntentId:s,amountCents:l}),Ip(e),console.log("[Deadline] Completed processing for booking:",e),{statusCode:200,body:JSON.stringify({bookingId:e,status:"REFUNDED",refundId:u})}}0&&(module.exports={handler});
